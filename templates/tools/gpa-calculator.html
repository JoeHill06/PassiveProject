{% extends "base.html" %}

{% block title %}GPA Calculator - Calculate Your Grade Point Average (4.0 & 5.0 Scale){% endblock %}

{% block meta_description %}Calculate your GPA instantly. Enter your letter grades (A, B, C) and credit hours to get your Grade Point Average on the 4.0 or 5.0 scale. Free, no sign-up.{% endblock %}

{% block meta_keywords %}GPA calculator, grade point average calculator, 4.0 GPA scale, 5.0 GPA scale, cumulative GPA{% endblock %}

{% block extra_head %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "GPA Calculator",
  "description": "Calculate your GPA on 4.0 or 5.0 scale",
  "applicationCategory": "EducationalApplication",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  }
}
</script>
{% endblock %}

{% block content %}
<h1>GPA Calculator</h1>
<p>Enter your course grades (A, B, C, etc.) and credit hours below to calculate your GPA. Works with both 4.0 scale (most common) and 5.0 scale (where A+ = 5.0). Results are instant.</p>

<div class="alert alert-info" style="margin: 2rem 0;">
    <h3>What's a Good GPA?</h3>
    <ul style="margin: 0;">
        <li><strong>3.7 - 4.0:</strong> Excellent (competitive for top grad schools)</li>
        <li><strong>3.0 - 3.6:</strong> Good (meets most grad school requirements)</li>
        <li><strong>2.0 - 2.9:</strong> Average (may limit graduate options)</li>
        <li><strong>Below 2.0:</strong> Below average</li>
    </ul>
    <p style="margin-top: 1rem; margin-bottom: 0;">Enter your grades below to calculate your GPA.</p>
</div>

<div class="calculator-section">
    <h2>Select Your GPA Scale</h2>

    <div class="form-group">
        <label for="gpaScale">GPA Scale</label>
        <select id="gpaScale">
            <option value="4.0" selected>4.0 Scale (Most Common)</option>
            <option value="5.0">5.0 Scale (With A+ = 5.0)</option>
        </select>
        <small>Choose the GPA scale used by your institution</small>
    </div>

    <h2>Enter Your Courses</h2>
    <div id="courses" class="dynamic-inputs">
        <div class="input-row">
            <input type="text" placeholder="Course name (optional)" class="course-name">
            <select class="course-grade" required>
                <option value="">Select Grade</option>
                <option value="A+">A+</option>
                <option value="A">A</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B">B</option>
                <option value="B-">B-</option>
                <option value="C+">C+</option>
                <option value="C">C</option>
                <option value="C-">C-</option>
                <option value="D+">D+</option>
                <option value="D">D</option>
                <option value="D-">D-</option>
                <option value="F">F</option>
            </select>
            <input type="number" placeholder="Credit Hours" min="0" step="0.5" class="course-credits" required>
            <button type="button" class="btn-remove" onclick="removeCourse(this)">Remove</button>
        </div>
    </div>
    <button type="button" class="btn btn-add" onclick="addCourse()">+ Add Course</button>

    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
        <button type="button" class="btn btn-primary btn-block" onclick="calculateGPA()">Calculate GPA</button>
        <button type="button" class="btn btn-secondary btn-block" onclick="resetGPACalculator()">Reset</button>
    </div>

    <div id="results" class="results">
        <h2>Your Results</h2>
        <div id="resultsContent"></div>
    </div>
</div>

<section class="content-section">
    <h2>Understanding GPA Scales</h2>

    <h3>4.0 GPA Scale (Most Common)</h3>
    <p>The 4.0 scale is the most widely used GPA scale in the United States and many other countries:</p>
    <table>
        <thead>
            <tr>
                <th>Letter Grade</th>
                <th>Grade Points (4.0 Scale)</th>
                <th>Percentage</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>A+</td><td>4.0</td><td>97-100%</td></tr>
            <tr><td>A</td><td>4.0</td><td>93-96%</td></tr>
            <tr><td>A-</td><td>3.7</td><td>90-92%</td></tr>
            <tr><td>B+</td><td>3.3</td><td>87-89%</td></tr>
            <tr><td>B</td><td>3.0</td><td>83-86%</td></tr>
            <tr><td>B-</td><td>2.7</td><td>80-82%</td></tr>
            <tr><td>C+</td><td>2.3</td><td>77-79%</td></tr>
            <tr><td>C</td><td>2.0</td><td>73-76%</td></tr>
            <tr><td>C-</td><td>1.7</td><td>70-72%</td></tr>
            <tr><td>D+</td><td>1.3</td><td>67-69%</td></tr>
            <tr><td>D</td><td>1.0</td><td>63-66%</td></tr>
            <tr><td>D-</td><td>0.7</td><td>60-62%</td></tr>
            <tr><td>F</td><td>0.0</td><td>0-59%</td></tr>
        </tbody>
    </table>

    <h3>5.0 GPA Scale</h3>
    <p>Some institutions use a 5.0 scale where A+ = 5.0. All other grades are scaled proportionally:</p>
    <table>
        <thead>
            <tr>
                <th>Letter Grade</th>
                <th>Grade Points (5.0 Scale)</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>A+</td><td>5.0</td></tr>
            <tr><td>A</td><td>4.0</td></tr>
            <tr><td>A-</td><td>3.7</td></tr>
            <tr><td>B+</td><td>3.3</td></tr>
            <tr><td>B</td><td>3.0</td></tr>
            <tr><td>B-</td><td>2.7</td></tr>
            <tr><td>C+</td><td>2.3</td></tr>
            <tr><td>C</td><td>2.0</td></tr>
            <tr><td>C-</td><td>1.7</td></tr>
            <tr><td>D+</td><td>1.3</td></tr>
            <tr><td>D</td><td>1.0</td></tr>
            <tr><td>D-</td><td>0.7</td></tr>
            <tr><td>F</td><td>0.0</td></tr>
        </tbody>
    </table>

    <h2>How GPA is Calculated</h2>
    <p>Your GPA is calculated by:</p>
    <ol>
        <li>Converting each letter grade to grade points (e.g., A = 4.0, B = 3.0)</li>
        <li>Multiplying each course's grade points by its credit hours</li>
        <li>Adding up all the grade points</li>
        <li>Dividing by the total number of credit hours</li>
    </ol>

    <p><strong>Formula:</strong> GPA = (Sum of Grade Points Ã— Credit Hours) / Total Credit Hours</p>

    <h2>Frequently Asked Questions</h2>

    <div class="faq">
        <div class="faq-item">
            <h3>How do I calculate my GPA?</h3>
            <p>To calculate GPA: (1) Convert each letter grade to points (A=4.0, B=3.0, etc.), (2) Multiply by credit hours, (3) Add all grade points together, (4) Divide by total credit hours. Use the calculator above for instant results.</p>
        </div>

        <div class="faq-item">
            <h3>What is a good GPA?</h3>
            <p>Generally, a GPA above 3.0 is considered good, 3.5+ is very good, and 3.7+ is excellent. However, this varies by institution and field of study. For competitive graduate programs, a GPA of 3.5 or higher is often expected.</p>
        </div>

        <div class="faq-item">
            <h3>What GPA do I need for grad school?</h3>
            <p>Most competitive graduate programs require a minimum GPA of 3.0, with top programs preferring 3.5 or higher. Requirements vary by field - STEM programs may be more flexible, while law and medical schools are very selective.</p>
        </div>

        <div class="faq-item">
            <h3>What's the difference between 4.0 and 5.0 scale?</h3>
            <p>On a 4.0 scale, the highest grade (A or A+) is worth 4.0 points. On a 5.0 scale, an A+ is worth 5.0 points, while an A is worth 4.0 points. Always check which scale your institution uses.</p>
        </div>

        <div class="faq-item">
            <h3>How do I convert percentage to GPA?</h3>
            <p>First, convert your percentage to a letter grade based on your institution's grading scale, then use the corresponding grade point value. Most institutions use: 90-100% = A (4.0), 80-89% = B (3.0), 70-79% = C (2.0), 60-69% = D (1.0), below 60% = F (0.0). If you're a UK student, see our <a href="{{ url_for('degree_calculator') }}">degree classification calculator</a> to convert your UK percentage to degree class.</p>
        </div>

        <div class="faq-item">
            <h3>Do all credits count equally?</h3>
            <p>No, courses with more credit hours have a larger impact on your GPA. A 4-credit course affects your GPA more than a 2-credit course, which is why credit hours are factored into the calculation.</p>
        </div>

        <div class="faq-item">
            <h3>Can I calculate my cumulative GPA for multiple semesters?</h3>
            <p>Yes! Simply enter all courses from all semesters into the calculator. The result will be your overall cumulative GPA.</p>
        </div>
    </div>
</section>

{% endblock %}

{% block scripts %}
<script>
const gradePoints = {
    '4.0': {
        'A+': 4.0, 'A': 4.0, 'A-': 3.7,
        'B+': 3.3, 'B': 3.0, 'B-': 2.7,
        'C+': 2.3, 'C': 2.0, 'C-': 1.7,
        'D+': 1.3, 'D': 1.0, 'D-': 0.7,
        'F': 0.0
    },
    '5.0': {
        'A+': 5.0, 'A': 4.0, 'A-': 3.7,
        'B+': 3.3, 'B': 3.0, 'B-': 2.7,
        'C+': 2.3, 'C': 2.0, 'C-': 1.7,
        'D+': 1.3, 'D': 1.0, 'D-': 0.7,
        'F': 0.0
    }
};

function addCourse() {
    const container = document.getElementById('courses');
    const newRow = document.createElement('div');
    newRow.className = 'input-row';
    newRow.innerHTML = `
        <input type="text" placeholder="Course name (optional)" class="course-name">
        <select class="course-grade" required>
            <option value="">Select Grade</option>
            <option value="A+">A+</option>
            <option value="A">A</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B">B</option>
            <option value="B-">B-</option>
            <option value="C+">C+</option>
            <option value="C">C</option>
            <option value="C-">C-</option>
            <option value="D+">D+</option>
            <option value="D">D</option>
            <option value="D-">D-</option>
            <option value="F">F</option>
        </select>
        <input type="number" placeholder="Credit Hours" min="0" step="0.5" class="course-credits" required>
        <button type="button" class="btn-remove" onclick="removeCourse(this)">Remove</button>
    `;
    container.appendChild(newRow);
}

function removeCourse(button) {
    const row = button.parentElement;
    const container = row.parentElement;
    if (container.children.length > 1) {
        row.remove();
    } else {
        alert('You must have at least one course.');
    }
}

function calculateGPA() {
    const scale = document.getElementById('gpaScale').value;
    const courseRows = document.querySelectorAll('#courses .input-row');

    let totalPoints = 0;
    let totalCredits = 0;
    const courses = [];

    courseRows.forEach(row => {
        const name = row.querySelector('.course-name').value || 'Unnamed Course';
        const grade = row.querySelector('.course-grade').value;
        const credits = parseFloat(row.querySelector('.course-credits').value);

        if (grade && !isNaN(credits) && credits > 0) {
            const points = gradePoints[scale][grade];
            const coursePoints = points * credits;
            totalPoints += coursePoints;
            totalCredits += credits;
            courses.push({ name, grade, credits, points, coursePoints });
        }
    });

    if (totalCredits === 0) {
        alert('Please enter at least one course with valid grade and credits.');
        return;
    }

    const gpa = totalPoints / totalCredits;

    // Determine GPA category
    let category, categoryClass;
    if (gpa >= 3.7) {
        category = 'Excellent';
        categoryClass = 'classification-first';
    } else if (gpa >= 3.0) {
        category = 'Good';
        categoryClass = 'classification-21';
    } else if (gpa >= 2.0) {
        category = 'Average';
        categoryClass = 'classification-22';
    } else {
        category = 'Below Average';
        categoryClass = 'classification-third';
    }

    // Display results
    let html = `
        <div class="result-item ${categoryClass}">
            <h3>Cumulative GPA</h3>
            <div class="result-value">${gpa.toFixed(2)}</div>
            <p>${category} (${scale} Scale)</p>
        </div>

        <div class="result-item">
            <h3>Total Credits</h3>
            <div class="result-value">${totalCredits.toFixed(1)}</div>
        </div>

        <div class="result-item">
            <h3>Total Grade Points</h3>
            <div class="result-value">${totalPoints.toFixed(2)}</div>
        </div>
    `;

    // Add course breakdown
    html += '<div class="result-item"><h3>Course Breakdown</h3><table>';
    html += '<thead><tr><th>Course</th><th>Grade</th><th>Credits</th><th>Points</th><th>Grade Points</th></tr></thead><tbody>';

    courses.forEach(course => {
        html += `<tr>
            <td>${course.name}</td>
            <td>${course.grade}</td>
            <td>${course.credits.toFixed(1)}</td>
            <td>${course.points.toFixed(1)}</td>
            <td>${course.coursePoints.toFixed(2)}</td>
        </tr>`;
    });

    html += '</tbody></table></div>';

    // Add GPA interpretation
    if (gpa >= 3.5) {
        html += `
            <div class="result-item alert-success">
                <h3>GPA Interpretation</h3>
                <p>Your GPA of ${gpa.toFixed(2)} is excellent! This is competitive for most graduate programs and scholarships.</p>
            </div>
        `;
    } else if (gpa >= 3.0) {
        html += `
            <div class="result-item alert-info">
                <h3>GPA Interpretation</h3>
                <p>Your GPA of ${gpa.toFixed(2)} is good. You're ${(3.5 - gpa).toFixed(2)} points away from an excellent GPA (3.5+).</p>
            </div>
        `;
    } else if (gpa >= 2.0) {
        html += `
            <div class="result-item alert-warning">
                <h3>GPA Interpretation</h3>
                <p>Your GPA of ${gpa.toFixed(2)} is average. Consider improving your grades to reach a good GPA (3.0+). You're ${(3.0 - gpa).toFixed(2)} points away.</p>
            </div>
        `;
    } else {
        html += `
            <div class="result-item alert-warning">
                <h3>GPA Interpretation</h3>
                <p>Your GPA of ${gpa.toFixed(2)} is below average. Focus on improving your grades in upcoming courses.</p>
            </div>
        `;
    }

    document.getElementById('resultsContent').innerHTML = html;
    document.getElementById('results').classList.add('show');
    document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function resetGPACalculator() {
    document.getElementById('gpaScale').value = '4.0';

    const container = document.getElementById('courses');
    container.innerHTML = `
        <div class="input-row">
            <input type="text" placeholder="Course name (optional)" class="course-name">
            <select class="course-grade" required>
                <option value="">Select Grade</option>
                <option value="A+">A+</option>
                <option value="A">A</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B">B</option>
                <option value="B-">B-</option>
                <option value="C+">C+</option>
                <option value="C">C</option>
                <option value="C-">C-</option>
                <option value="D+">D+</option>
                <option value="D">D</option>
                <option value="D-">D-</option>
                <option value="F">F</option>
            </select>
            <input type="number" placeholder="Credit Hours" min="0" step="0.5" class="course-credits" required>
            <button type="button" class="btn-remove" onclick="removeCourse(this)">Remove</button>
        </div>
    `;

    document.getElementById('results').classList.remove('show');
}
</script>
{% endblock %}
